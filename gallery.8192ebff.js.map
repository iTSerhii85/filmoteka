{"mappings":"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","sources":["src/gallery.js","src/js/local-storage.js"],"sourcesContent":["import './js/preloader';\nimport './js/footer-modal';\nimport './js/local-storage';\n","// !!!!!!!!!!добавил это  !!!!!!!!!!!!!!!!\n\nimport { paginationMarkUp } from './pagination.js';\nconst paginationBox = document.querySelector('.pagination');\nlet currentPage = 1;\n\n// -----------------------\n\nconst watchedLibBtn = document.querySelector('.js-watched-lib-btn');\nconst queueLibBtn = document.querySelector('.js-queue-lib-btn');\nconst libraryBox = document.querySelector('.js-library-gallery');\nconst emptyGalleryBox = document.querySelector('.info-notify-box');\nconst emptyGalleryText = document.querySelector('.info-notify-text');\n\n// Функція розпарсить об'єкти з localStorage\nfunction localStorageObject(key) {\n  const getObjectFromLs = localStorage.getItem(key);\n  const parseObjectFromLs = JSON.parse(getObjectFromLs);\n  console.log(parseObjectFromLs);\n  return parseObjectFromLs;\n}\n// ключі від localStorage\nconst watchedArray = localStorageObject('TRENDING_DATA_KEY');\nconst queueArray = localStorageObject('SEARCH_RESULT_DATA_KEY');\n\n// Рендерить розмітку у бібліотеці по дефолту\nrenderLibrary(watchedArray);\nwatchedLibBtn.classList.add('btn-is-active');\n\n// Функція для рендуру розмітки\nfunction renderLibrary(arrayMovies) {\n  if (arrayMovies.length === 0) {\n    clearMarkup();\n    return emptyGalleryBox.classList.remove('is-hidden');\n  }\n\n  const markupOneCard = obj => {\n    clearMarkup();\n    checkGenresById(obj);\n\n    return ` <li class=\"card-wraper\" id=\"${obj.id}\">\n       <img class=\"card-img\" src=\"https://image.tmdb.org/t/p/w500${\n         obj.poster_path\n       }\" alt=\"#\" />\n       <div class=\"card-title\">${obj.title || obj.name}</div>\n      <div class=\"wraper\">\n         <div class=\"card-genre-wraper\">\n           <div class=\"card-genre\">${checkGenresById(obj)}</div>\n         </div>\n         <div class=\"card-year\">\n         ${obj.release_date.slice(0, 4) || obj.first_air_date.slice(0, 4) || ''}\n         </div>\n         <div class=\"card-rating-wraper\"><div class=\"card-rating\">${obj.vote_average.toFixed(\n           1\n         )}</div></div>\n       </div>\n     </li>`;\n  };\n\n  const libraryMarkup = arrayMovies.map(markupOneCard).join('');\n  libraryBox.insertAdjacentHTML('beforeend', libraryMarkup);\n\n  // !!!!!!!!!!добавил это  !!!!!!!!!!!!!!!!\n\n  currentPage = 1;\n  let arr = localStorage.getItem('SEARCH_RESULT_DATA_KEY');\n  let parsedArr = JSON.parse(arr);\n  console.log(parsedArr);\n  maxPage = parsedArr.length / 20;\n  paginationMarkUp(currentPage, maxPage);\n\n  // paginationMarkUp(currentPage, 30);\n\n  // -----------------------\n}\n\n// Функція для генерації жанрів по id\nfunction checkGenresById(obj) {\n  const savedGenresData = localStorage.getItem('GENRES_DATA_KEY');\n  const parseGenresData = JSON.parse(savedGenresData);\n  let genresArr = [];\n\n  const genresIds = obj.genre_ids;\n\n  for (const parseGenre of parseGenresData) {\n    if (genresIds.includes(parseGenre.id)) {\n      genresArr.push(parseGenre.name);\n    }\n  }\n\n  let genresStr = '';\n  if (genresArr.length === 0) {\n    genresStr = 'Unknown genre';\n  } else if (genresArr.length <= 2) {\n    genresStr = genresArr.join(', ');\n  } else {\n    genresArr.splice(2, genresArr.length);\n    genresStr = genresArr.join(', ') + ', Other';\n  }\n  return genresStr;\n}\n\nwatchedLibBtn.addEventListener('click', onClickWatched);\nqueueLibBtn.addEventListener('click', onClickQueue);\n\nfunction onClickWatched() {\n  // !!!!!!!!!!добавил это  !!!!!!!!!!!!!!!!\n\n  currentPage = 1;\n  let arr = localStorage.getItem('SEARCH_RESULT_DATA_KEY');\n  let parsedArr = JSON.parse(arr);\n  maxPage = parsedArr.length / 20;\n  paginationMarkUp(currentPage, maxPage);\n  // -----------------------\n\n  watchedLibBtn.classList.add('btn-is-active');\n  queueLibBtn.classList.remove('btn-is-active');\n  emptyGalleryBox.classList.add('is-hidden');\n  renderLibrary(watchedArray);\n}\n\nfunction onClickQueue() {\n  // !!!!!!!!!!добавил это  !!!!!!!!!!!!!!!!\n\n  currentPage = 1;\n  let arr = localStorage.getItem('SEARCH_RESULT_DATA_KEY');\n  let parsedArr = JSON.parse(arr);\n  maxPage = parsedArr.length / 20;\n  paginationMarkUp(currentPage, maxPage);\n  // -----------------------\n\n  emptyGalleryBox.classList.add('is-hidden');\n  queueLibBtn.classList.add('btn-is-active');\n  watchedLibBtn.classList.remove('btn-is-active');\n  renderLibrary(queueArray);\n}\n\nfunction clearMarkup() {\n  libraryBox.innerHTML = '';\n}\n\n// !!!!!!!!!!добавил это  !!!!!!!!!!!!!!!!\n\npaginationBox.addEventListener('click', Onclick);\n\nfunction Onclick(evt) {\n  if (evt.target.textContent == '...') {\n    return;\n  }\n  if (evt.target.nodeName !== 'P') {\n    return;\n  }\n  currentPage = evt.target.textContent;\n  paginationMarkUp(currentPage, maxPage);\n}\n\n// -----------------------\n"],"names":["parcelRequire","$jcFG7","$3791646d3ae2cee8$var$paginationBox","document","querySelector","$3791646d3ae2cee8$var$currentPage","$3791646d3ae2cee8$var$watchedLibBtn","$3791646d3ae2cee8$var$queueLibBtn","$3791646d3ae2cee8$var$libraryBox","$3791646d3ae2cee8$var$emptyGalleryBox","$3791646d3ae2cee8$var$localStorageObject","key","getObjectFromLs","localStorage","getItem","parseObjectFromLs","JSON","parse","console","log","$3791646d3ae2cee8$var$watchedArray","$3791646d3ae2cee8$var$queueArray","$3791646d3ae2cee8$var$renderLibrary","arrayMovies","length","$3791646d3ae2cee8$var$clearMarkup","classList","remove","libraryMarkup","map","obj","$3791646d3ae2cee8$var$checkGenresById","concat","id","poster_path","title","name","release_date","slice","first_air_date","vote_average","toFixed","join","insertAdjacentHTML","arr","parsedArr","maxPage","paginationMarkUp","savedGenresData","parseGenresData","genresArr","genresIds","genre_ids","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","parseGenre","value","includes","push","err","return","genresStr","splice","innerHTML","add","addEventListener","evt","target","textContent","nodeName"],"version":3,"file":"gallery.8192ebff.js.map"}