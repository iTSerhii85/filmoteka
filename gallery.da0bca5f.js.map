{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-9a4a0a4b5afa0785.js","src/gallery.js","node_modules/@parcel/runtime-js/lib/runtime-e4b0789cd9ede7a0.js","src/js/local-storage.js","src/js/modalMovieLibrary.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"euV2r\\\":\\\"gallery.da0bca5f.js\\\",\\\"buPbL\\\":\\\"no-image.0b269193.jpg\\\",\\\"6teei\\\":\\\"gallery.6b9c2766.js\\\"}\"));","import './js/preloader';\nimport './js/footer-modal';\nimport './js/local-storage';\nimport './js/dark-light';\nimport './js/modalMovieLibrary';\n","module.exports = require('./helpers/bundle-url').getBundleURL('euV2r') + require('./helpers/bundle-manifest').resolve(\"buPbL\");","import no_image from '../images/no-image.jpg';\n\n// !!!!!!!!!!добавил это  !!!!!!!!!!!!!!!!\n\n// import { paginationMarkUp } from './pagination.js';\n// const paginationBox = document.querySelector('.pagination');\n// let currentPage = 1;\n// let maxPage = 1;\n\n// -----------------------\n\nconst watchedLibBtn = document.querySelector('.js-watched-lib-btn');\nconst queueLibBtn = document.querySelector('.js-queue-lib-btn');\nconst libraryBox = document.querySelector('.js-library-gallery');\nconst emptyGalleryBox = document.querySelector('.info-notify-box');\nconst emptyGalleryText = document.querySelector('.info-notify-text');\n\n// Функція розпарсить об'єкти з localStorage\nfunction localStorageObject(key) {\n  const getObjectFromLs = localStorage.getItem(key);\n  const parseObjectFromLs = JSON.parse(getObjectFromLs);\n  console.log(parseObjectFromLs);\n\n  // currentPage = 1;\n  // if (parseObjectFromLs === null) {\n  //   return\n  // } else { maxPage = Math.ceil(parseObjectFromLs.length / 20);\n\n  // paginationMarkUp(currentPage, maxPage)}\n\n  return parseObjectFromLs;\n}\n\n// ключі від localStorage\nconst watchedArray = localStorageObject('WATCHED_LIST_DATA_KEY');\nconst queueArray = localStorageObject('QUEUE_LIST_DATA_KEY');\n\n// Рендерить розмітку у бібліотеці по дефолту\nrenderLibrary(watchedArray);\nwatchedLibBtn.classList.add('btn-is-active');\n\n// Функція для рендуру розмітки\nfunction renderLibrary(arrayMovies) {\n  if (arrayMovies === null) {\n    clearMarkup();\n    return emptyGalleryBox.classList.remove('is-hidden');\n  }\n\n  const markupOneCard = obj => {\n    clearMarkup();\n    checkGenresById(obj);\n\n    let posterSrc = '';\n    if (obj.poster_path) {\n      posterSrc = `https://image.tmdb.org/t/p/w500${obj.poster_path}`;\n    } else {\n      posterSrc = no_image;\n    }\n\n    return ` <li class=\"card-wraper\" id=\"${obj.id}\">\n       <a class=\"card-wraper_link\" href=\"#\"><img class=\"card-img\" src=\"${posterSrc}\" alt=\"${\n      obj.title || obj.name\n    }\"/></a>\n       <div class=\"card-title\">${obj.title || obj.name}</div>\n      <div class=\"wraper\">\n         <div class=\"card-genre-wraper\">\n           <div class=\"card-genre\">${checkGenresById(obj)}</div>\n         </div>\n         <div class=\"card-year\">\n\n         ${obj.release_date.slice(0, 4) || obj.first_air_date.slice(0, 4) || ''}\n\n         </div>\n         <div class=\"card-rating-wraper\"><div class=\"card-rating\">${obj.vote_average.toFixed(\n           1\n         )}</div></div>\n       </div>\n     </li>`;\n  };\n\n  const libraryMarkup = arrayMovies.map(markupOneCard).join('');\n  libraryBox.insertAdjacentHTML('beforeend', libraryMarkup);\n\n  // !!!!!!!!!!добавил это  !!!!!!!!!!!!!!!!\n\n  // currentPage = 1;\n  // let arr = localStorage.getItem('TRENDING_DATA_KEY');\n  // let parsedArr = JSON.parse(arr);\n  // console.log(parsedArr);\n  // maxPage = Math.ceil(parsedArr.length / 20);\n  // console.log(maxPage);\n  // paginationMarkUp(currentPage, maxPage);\n\n  // -----------------------\n}\n\n// Функція для генерації жанрів по id\nfunction checkGenresById(obj) {\n  const savedGenresData = localStorage.getItem('GENRES_DATA_KEY');\n  const parseGenresData = JSON.parse(savedGenresData);\n  let genresArr = [];\n\n  const genresIds = obj.genre_ids;\n\n  for (const parseGenre of parseGenresData) {\n    if (genresIds.includes(parseGenre.id)) {\n      genresArr.push(parseGenre.name);\n    }\n  }\n\n  let genresStr = '';\n  if (genresArr.length === 0) {\n    genresStr = 'Unknown genre';\n  } else if (genresArr.length <= 2) {\n    genresStr = genresArr.join(', ');\n  } else {\n    genresArr.splice(2, genresArr.length);\n    genresStr = genresArr.join(', ') + ', Other';\n  }\n  return genresStr;\n}\n\nwatchedLibBtn.addEventListener('click', onClickWatched);\nqueueLibBtn.addEventListener('click', onClickQueue);\n\nfunction onClickWatched() {\n  // !!!!!!!!!!добавил это  !!!!!!!!!!!!!!!!\n\n  // currentPage = 1;\n  // let arr = localStorage.getItem('TRENDING_DATA_KEY');\n  // let parsedArr = JSON.parse(arr);\n  // maxPage = Math.ceil(parsedArr.length / 20);\n  // paginationMarkUp(currentPage, maxPage);\n\n  // -----------------------\n\n  watchedLibBtn.classList.add('btn-is-active');\n  queueLibBtn.classList.remove('btn-is-active');\n  emptyGalleryBox.classList.add('is-hidden');\n  renderLibrary(watchedArray);\n}\n\nfunction onClickQueue() {\n  // !!!!!!!!!!добавил это  !!!!!!!!!!!!!!!!\n\n  // currentPage = 1;\n  // let arr = localStorage.getItem('SEARCH_RESULT_DATA_KEY');\n  // let parsedArr = JSON.parse(arr);\n  // maxPage = Math.ceil(parsedArr.length / 20);\n  // paginationMarkUp(currentPage, maxPage);\n  // -----------------------\n\n  emptyGalleryBox.classList.add('is-hidden');\n  queueLibBtn.classList.add('btn-is-active');\n  watchedLibBtn.classList.remove('btn-is-active');\n  renderLibrary(queueArray);\n}\n\nfunction clearMarkup() {\n  libraryBox.innerHTML = '';\n}\n\n// !!!!!!!!!!добавил это  !!!!!!!!!!!!!!!!\n\n// paginationBox.addEventListener('click', Onclick);\n\n// function Onclick(evt) {\n//   if (evt.target.textContent == '...') {\n//     return;\n//   }\n//   if (evt.target.nodeName !== 'P') {\n//     return;\n//   }\n//   currentPage = evt.target.textContent;\n\n//   if (evt.target.textContent == '>>') {\n//     currentPage = Number(targetPage.textContent) + 1;\n//   }\n\n//   if (evt.target.textContent == '<<') {\n//     currentPage = Number(targetPage.textContent) - 1;\n//   }\n\n//   paginationMarkUp(currentPage, maxPage);\n//   for (i = (currentPage - 1) * 20; i < (currentPage - 1) * 20 + 20; i += 1) {\n//     console.log(`i=${i}`);\n\n//     // И вот тут отрисовываем карточки из массива по интексам   <<<<<-----------\n//   }\n// }\n\n// -----------------------\n","// import { checkGenresById } from \"./markup_mainGallery\";\n\n\nlet watched = localStorageObject('WATCHED_LIST_DATA_KEY');\n\nfunction saveWatchedListToLocalStorage(data) {\n  localStorage.setItem('WATCHED_LIST_DATA_KEY', JSON.stringify(data));\n}\n\nlet queue = localStorageObject('QUEUE_LIST_DATA_KEY');\n\nfunction saveQueueListToLocalStorage(data) {\n  localStorage.setItem('QUEUE_LIST_DATA_KEY', JSON.stringify(data));\n}\n\nlet currentId = null;\nconst cardList = document.querySelector('.js-library-gallery');\nconst backdrop = document.querySelector('.backdrop-modal');\nconst closeModalBtn = document.querySelector('.button-close');\nconst movieCard = document.querySelector('.modal-movie-card');\ncardList.addEventListener('click', event => {\n  if (event.target.nodeName === 'IMG') {\n    renderModal(event);\n  }\n});\n\nfunction localStorageObject(key) {\n  const getObjectFromLs = localStorage.getItem(key);\n  const parseObjectFromLs = JSON.parse(getObjectFromLs);\n//   console.log(parseObjectFromLs);\n  return parseObjectFromLs;\n}\n\nfunction openModal(event) {\n//   console.log('openModal');\n\n  if (watched === null) {\n    watched = new Array();\n  }\n  \n  if (queue === null) {\n    queue = new Array();\n  }\n\n\n\n  const toWatchedBtn = document.querySelector('.js-btn-to-watched');\n  const removeWatchedBtn = document.querySelector('.js-btn-from-watched');\n\n  const toQueueBtn = document.querySelector('.js-btn-to-queue');\n  const removeQueueBtn = document.querySelector('.js-btn-from-queue');\n\n  toWatchedBtn.addEventListener('click', onToWatchedBtn);\n  removeWatchedBtn.addEventListener('click', onRemoveWatchedBtn);\n\n  toQueueBtn.addEventListener('click', onToQueueBtn);\n  removeQueueBtn.addEventListener('click', onRemoveQueueBtn);\n\n\n\n  closeModalBtn.addEventListener('click', closeModal);\n  backdrop.addEventListener('click', event => closeModalBackdrop(event));\n  document.addEventListener('keydown', event => closeModalEsc(event));\n  backdrop.classList.remove('is-hidden');\n  setTimeout(() => {\n    backdrop.firstElementChild.classList.remove('is-hidden');\n  }, 350);\n  document.body.classList.add('modal-open');\n}\n\nfunction onToWatchedBtn(event) {\n  const button = event.currentTarget;\n\n  const movieId = +button.id;\n  const data = findMovieById(movieId);\n  const watchedFilms = localStorageObject('WATCHED_LIST_DATA_KEY') || [];\n  const alreadyExists = watchedFilms.find(item => item.id === movieId);\n\n  if (!alreadyExists) {\n    watchedFilms.push(data);\n    saveWatchedListToLocalStorage(watchedFilms);\n  }\n}\n\nfunction onRemoveWatchedBtn(event) {\n  const button = event.currentTarget;\n\n  const movieId = +button.id;\n  const isExist = watchedFilms.find(item => item.id === movieId);\n\n  const watchedFilms = localStorageObject('WATCHED_LIST_DATA_KEY') || [];\n\n  if (isExist) {\n    watched.remove();\n    const updatedFilms = watchedFilms.filter(item => item.id !== movieId);\n    saveWatchedListToLocalStorage(updatedFilms);\n  }\n}\n\nfunction onToQueueBtn(event) {\n  const button = event.currentTarget;\n\n  const movieId = +button.id;\n  const data = findMovieById(movieId);\n  const queuedFilms = localStorageObject('QUEUE_LIST_DATA_KEY') || [];\n  const alreadyOnQueue = queuedFilms.find(item => item.id === movieId);\n\n  if (!alreadyOnQueue) {\n    queuedFilms.push(data);\n    saveQueueListToLocalStorage(queuedFilms);\n  }\n}\n\nfunction onRemoveQueueBtn(event) {\n  const button = event.currentTarget;\n  const movieId = +button.id;\n  const queuedFilms = localStorageObject('QUEUE_LIST_DATA_KEY') || [];\n  const isExist = queuedFilms.find(item => item.id === movieId);\n\n  if (isExist) {\n    queue.remove(movieId);\n    const updatedFilms = watchedFilms.filter(item => item.id !== movieId);\n    saveQueueListToLocalStorage(updatedFilms);\n  }\n}\n\nfunction closeModal(event) {\n  backdrop.classList.add('is-hidden');\n  backdrop.firstElementChild.classList.remove('is-hidden');\n  closeModalBtn.removeEventListener('click', closeModal);\n  backdrop.removeEventListener('click', closeModal);\n  document.removeEventListener('keydown', event => closeModalEsc(event));\n  document.body.classList.remove('modal-open');\n  backdrop.style.background = '';\n}\n\nfunction closeModalBackdrop(event) {\n  if (event.target.classList.value !== 'backdrop-modal') {\n    return;\n  }\n  closeModal();\n}\nfunction closeModalEsc(event) {\n  if (event.key !== 'Escape') {\n    return;\n  }\n  closeModal();\n}\n\nconst renderModal = event => {\n  const cardId = event.target.closest('li');\n  const idMovie = cardId.id;\n  const data = findMovieById(idMovie);\n  if (data) {\n    currentId = data.id;\n    renderMovieCard(data);\n    openModal(event);\n  }\n};\n\nfunction findMovieById(idMovie) {\n  const savedTrendingFilms = localStorage.getItem('QUEUE_LIST_DATA_KEY');\n  const arrayMovies = JSON.parse(savedTrendingFilms);\n  const data = arrayMovies.find(arr => arr.id === Number(idMovie));\n  if (!data) {\n         const savedTrendingFilms = localStorage.getItem('WATCHED_LIST_DATA_KEY');\n         const arrayMovies = JSON.parse(savedTrendingFilms);\n         const obj = arrayMovies.find(arr => arr.id === Number(idMovie));\n         return obj;\n  }\n  return data;\n}\n\nfunction renderMovieCard(obj) {\n  const backdropImage = obj.backdrop_path;\n  if (backdropImage !== null) {\n    const background = `https://image.tmdb.org/t/p/original/${obj.backdrop_path}`;\n    backdrop.style.backgroundImage = `url('${background}')`;\n    backdrop.style.backgroundSize = 'cover';\n    backdrop.style.backgroundPosition = '50% 50%';\n  }\n  mark(obj);\n}\n\nfunction mark(obj) {\n\n    const markup = `\n            <div class='modal-movie-card__wrappe-img'>\n                <img id=\"${obj.id}\" class=\"modal-movie-card__image\" src=\"https://image.tmdb.org/t/p/w500${obj.poster_path}\"alt=\"#\" />\n            </div>\n            <div class='modal-movie-data'>\n                <h2 class='modal-movie-data__title'>${obj.title || obj.name}</h2>\n                <h3 class='modal-movie-data__about_title'>About</h3>\n\n                <table class='modal-movie-data-table'>\n                    <tr class='modal-movie-data-table__row'>\n                        <td>\n                            <p class='modal-movie-data__attribute'>Vote / Votes</p>\n                        </td>\n                        <td>\n                            <p><span class='modal-movie-data__vote'>${obj.vote_average.toFixed(1)}</span> / ${obj.vote_count}</p>\n                        </td>\n                    </tr>\n                    <tr class='modal-movie-data-table__row'>\n                        <td>\n                            <p>Popularity</p>\n                        </td>\n                        <td>\n                            <p>${obj.popularity.toFixed(1)}</p>\n                        </td>\n                    </tr>\n                    <tr class='modal-movie-data-table__row'>\n                        <td>\n                            <p>Original Title</p>\n                        </td>\n                        <td>\n                            <p>${obj.original_title}</p>\n                        </td>\n                    </tr>\n                    <tr class='modal-movie-data-table__row'>\n                        <td>\n                            <p>Genre</p>\n                        </td>\n                        <td>\n                            <p>Жанры</p>\n                        </td>\n                    </tr>\n\n                </table>\n                \n                <p class='modal-movie-data__about'>${obj.overview}</p>\n                <ul class='modal-movie-data__btn-list'>\n                    <li class='modal-movie-data__btn-item'  >\n                        <button id='${ obj.id}' class='modal-movie-data__btn modal-movie-data__btn-watched js-btn-to-watched' type='button' data-action='${ obj.id}'>\n                            ADD TO WATCHED\n                        </button>\n                        <button  id='${obj.id}' class='modal-movie-data__btn modal-movie-data__btn-watched active is-hidden-btn js-btn-from-watched' type='button' data-action='${obj.id}'>\n                            REMOVE FROM WATCHED\n                        </button>\n                    </li>\n                    <li class='modal-movie-data__button-item' >\n                        <button  id='${obj.id}' class='modal-movie-data__btn modal-movie-data__btn-queue js-btn-to-queue' type='button' data-action='${obj.id}'>\n                            ADD TO QUEUE\n                        </button>\n                        <button id='${obj.id}' class='modal-movie-data__btn modal-movie-data__btn-queue active is-hidden-btn js-btn-from-queue' type='button' data-action='${obj.id}'>\n                            REMOVE FROM QUEUE\n                        </button>\n                    </li>\n                </ul>\n                <div class=\"trailer-btn-wrapper\">\n                    <button  id='${obj.id}' class='trailer-btn' type='button' data-action='${obj.id}'>\n                        watch trailer\n                    </button>\n                </div>\n            </div>`;\n\n  movieCard.innerHTML = markup;\n}\n"],"names":["parcelRequire","register","JSON","parse","$087c45695e1f0c2f$exports","getBundleURL","resolve","$3791646d3ae2cee8$var$watchedLibBtn","document","querySelector","$3791646d3ae2cee8$var$queueLibBtn","$3791646d3ae2cee8$var$libraryBox","$3791646d3ae2cee8$var$emptyGalleryBox","$3791646d3ae2cee8$var$localStorageObject","key","getObjectFromLs","localStorage","getItem","parseObjectFromLs","console","log","$3791646d3ae2cee8$var$watchedArray","$3791646d3ae2cee8$var$queueArray","$3791646d3ae2cee8$var$renderLibrary","arrayMovies","$3791646d3ae2cee8$var$clearMarkup","classList","remove","libraryMarkup","map","obj","$3791646d3ae2cee8$var$checkGenresById","posterSrc","poster_path","concat","$parcel$interopDefault","id","title","name","release_date","slice","first_air_date","vote_average","toFixed","join","insertAdjacentHTML","savedGenresData","parseGenresData","genresArr","genresIds","genre_ids","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","parseGenre","value","includes","push","err","return","genresStr","length","splice","innerHTML","add","addEventListener","$66b2a4161ec22b33$var$watched","$66b2a4161ec22b33$var$localStorageObject","$66b2a4161ec22b33$var$saveWatchedListToLocalStorage","data","setItem","stringify","$66b2a4161ec22b33$var$queue","$66b2a4161ec22b33$var$saveQueueListToLocalStorage","$66b2a4161ec22b33$var$cardList","$66b2a4161ec22b33$var$backdrop","$66b2a4161ec22b33$var$closeModalBtn","$66b2a4161ec22b33$var$movieCard","$66b2a4161ec22b33$var$openModal","event1","Array","toWatchedBtn","removeWatchedBtn","toQueueBtn","removeQueueBtn","$66b2a4161ec22b33$var$onToWatchedBtn","$66b2a4161ec22b33$var$onRemoveWatchedBtn","$66b2a4161ec22b33$var$onToQueueBtn","$66b2a4161ec22b33$var$onRemoveQueueBtn","$66b2a4161ec22b33$var$closeModal","event","target","$66b2a4161ec22b33$var$closeModalBackdrop","$66b2a4161ec22b33$var$closeModalEsc","setTimeout","firstElementChild","body","movieId","currentTarget","$66b2a4161ec22b33$var$findMovieById","watchedFilms","find","item","isExist","filter","queuedFilms","event2","removeEventListener","style","background","nodeName","$66b2a4161ec22b33$var$renderModal","closest","backdrop_path","backgroundImage","backgroundSize","backgroundPosition","markup","vote_count","popularity","original_title","overview","$66b2a4161ec22b33$var$mark","$66b2a4161ec22b33$var$renderMovieCard","idMovie","savedTrendingFilms","arr","Number","savedTrendingFilms1"],"version":3,"file":"gallery.da0bca5f.js.map"}